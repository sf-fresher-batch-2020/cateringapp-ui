<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>catering app</title>
    <link rel = "stylesheet" type="text/css" href="Form1.css">
    <!-- CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"       crossorigin="anonymous">

    <!-- jQuery and JS bundle w/ Popper.js -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"        
        crossorigin="anonymous">
      </script>
      <script src="./services/authService.js"></script>
</head>
<body style="background: url(isko.png)no-repeat;
background-size: 100% 100%;
background-attachment: fixed;">
<header id="header">
  <!-- Load Header content-->
</header>
</body>
     <h2>Login to enjoy our service</h2>
        
        <form method="GET" onsubmit="login()" autocomplete="off">
        
          <div>
            <label><b>Username</b></label>
            <input type="text" id="uname" name="uname" required>
        
            <label for="psw"><b>Password</b></label>
            <input type="password" placeholder="Enter Password"  id="psw" name="psw" required>
                
            <button type="submit" class="loginbtn">Login</button>
          </div>
        </form>
        <script>
             $("#header").load("components/_header.html");
             function login() {
              event.preventDefault();
              const authService = new AuthService();
              // Step 1: Get Form Values
              let uname = document.querySelector("#uname").value;
              let password = document.querySelector("#psw").value;
              //Step 2: Store all form values in a single object, so that it will easy to send 
              let obj = { "uname": uname , "password": password };
              console.log(obj);
              let user = authService.login(uname,password);
              if(user)
              {
                  window.location.href="listevent.html";
              }
              else
              {
                  document.querySelector("#message").innerHTML = "invalid";
              }
              }
        </script>
        </body>
        </html>
